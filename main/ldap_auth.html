<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LDAP authentication &mdash; AMQ Ansible Collection  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5707b69d" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/antsibull-minimal.css" />
      <link rel="stylesheet" type="text/css" href="_static/ansible-basic-sphinx-ext.css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Ha configuration with active/standby nodes" href="static_cluster.html" />
    <link rel="prev" title="Service configuration with systemd" href="systemd.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            AMQ Ansible Collection
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="README.html">Ansible Collection - AMQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins/index.html">Plugin Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="roles/index.html">Role Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">Changelog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Usage guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="base_deployment.html">Base deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="base_deployment.html#base-configuration">Base configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="systemd.html">Systemd configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">LDAP authentication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#base-authentication">Base authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-example">Configuration example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#custom-jaas-login-config-file">Custom jaas login.config file</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="static_cluster.html">HA setup active/standby</a></li>
<li class="toctree-l1"><a class="reference internal" href="masked_passwords.html">Encrypted passwords</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developing.html">Developing</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="releasing.html">Releasing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Middleware collections</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://ansible-middleware.github.io/amq/">ActiveMQ / Red Hat AMQ Broker</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ansible-middleware.github.io/keycloak/">Keycloak / Red Hat Single Sign-On</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ansible-middleware.github.io/wildfly/">Wildfly / Red Hat JBoss EAP</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ansible-middleware.github.io/infinispan/">Infinispan / Red Hat Data Grid</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ansible-middleware.github.io/jws/">Tomcat / Red Hat JWS</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ansible-middleware.github.io/amq_streams/">Kafka / Red Hat AMQ Streams</a></li>
<li class="toctree-l1"><a class="reference external" href="https://ansible-middleware.github.io/ansible_collections_jcliff/">JCliff</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">AMQ Ansible Collection</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">LDAP authentication</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/ldap_auth.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ldap-authentication">
<h1>LDAP authentication<a class="headerlink" href="#ldap-authentication" title="Link to this heading"></a></h1>
<section id="base-authentication">
<h2>Base authentication<a class="headerlink" href="#base-authentication" title="Link to this heading"></a></h2>
<p>The following new parameters allows to configure a secondary (sufficient) or primary (required) LDAP authentication endpoint.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Variable</p></th>
<th class="head text-left"><p>Description</p></th>
<th class="head text-left"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">activemq_auth_properties_enabled</span></code></p></td>
<td class="text-left"><p>Whether to enable property based JAAS config</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">activemq_auth_ldap_enabled</span></code></p></td>
<td class="text-left"><p>Whether to enable LDAP based JAAS config</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">activemq_auth_ldap_url</span></code></p></td>
<td class="text-left"><p>URL for LDAP server connection</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ldap://localhost:389</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">activemq_auth_ldap_conn_username</span></code></p></td>
<td class="text-left"><p>Bind username for LDAP server</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">uid=admin,ou=system</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">activemq_auth_ldap_conn_password</span></code></p></td>
<td class="text-left"><p>Bind user password for LDAP server</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">password</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">activemq_auth_ldap_conn_codec</span></code></p></td>
<td class="text-left"><p>Optional password codec class for bind user password</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">activemq_password_codec</span> <span class="pre">}}</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">activemq_auth_ldap_conn_protocol</span></code></p></td>
<td class="text-left"><p>Protocol for LDAP connection</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">s</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">activemq_auth_ldap_auth</span></code></p></td>
<td class="text-left"><p>Type of LDAP server authentication</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">simple</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">activemq_auth_ldap_user_base</span></code></p></td>
<td class="text-left"><p>Base for user search</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ou=Users,dc=example,dc=com</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">activemq_auth_ldap_user_search</span></code></p></td>
<td class="text-left"><p>User attribute</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">(uid={0})</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">activemq_auth_ldap_user_search_subtree</span></code></p></td>
<td class="text-left"><p>Whether to enable subtree user search</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">activemq_auth_ldap_role_base</span></code></p></td>
<td class="text-left"><p>Base for role search</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ou=Groups,dc=example,dc=com</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">activemq_auth_ldap_role_name</span></code></p></td>
<td class="text-left"><p>Role attribute</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">cn</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">activemq_auth_ldap_role_search</span></code></p></td>
<td class="text-left"><p>Role search attribute</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">(member={0})</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">activemq_auth_ldap_role_search_subtree</span></code></p></td>
<td class="text-left"><p>Whether to enable subtree role search</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">activemq_auth_ldap_referral</span></code></p></td>
<td class="text-left"><p>Specify how to handle referrals; valid values: ignore, follow, throw</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ignore</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="configuration-example">
<h2>Configuration example<a class="headerlink" href="#configuration-example" title="Link to this heading"></a></h2>
<p>The following example shows how to connect to a test LDAP service publivly available:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">activemq_hawtio_role</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Scientists</span>
<span class="w">    </span><span class="nt">activemq_auth_ldap_enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">    </span><span class="nt">activemq_auth_ldap_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ldap://ldap.forumsys.com:389</span>
<span class="w">    </span><span class="nt">activemq_auth_ldap_conn_username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uid=tesla,dc=example,dc=com</span>
<span class="w">    </span><span class="nt">activemq_auth_ldap_conn_password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">password</span>
<span class="w">    </span><span class="nt">activemq_auth_ldap_user_base</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dc=example,dc=com</span>
<span class="w">    </span><span class="nt">activemq_auth_ldap_user_search</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;(uid={0})&#39;</span>
<span class="w">    </span><span class="nt">activemq_auth_ldap_role_base</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dc=example,dc=com</span>
<span class="w">    </span><span class="nt">activemq_auth_ldap_role_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cn</span>
<span class="w">    </span><span class="nt">activemq_auth_ldap_role_search</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;(uniqueMember={0})&#39;</span>
<span class="w">    </span><span class="nt">activemq_auth_ldap_role_search_subtree</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">    </span><span class="nt">activemq_users</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">amq</span>
<span class="w">        </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">amqbrokerpass</span>
<span class="w">        </span><span class="nt">roles</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">admin</span><span class="w"> </span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">other</span>
<span class="w">        </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">amqotherpass</span>
<span class="w">        </span><span class="nt">roles</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">consumer</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">producer</span><span class="w"> </span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">activemq_roles</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class="w">        </span><span class="nt">permissions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">createNonDurableQueue</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">deleteNonDurableQueue</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">createDurableQueue</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">deleteDurableQueue</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">createAddress</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">deleteAddress</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">consume</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">browse</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">send</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">manage</span><span class="w"> </span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Scientists</span>
<span class="w">        </span><span class="nt">permissions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="nv">createNonDurableQueue</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">deleteNonDurableQueue</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">createDurableQueue</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">deleteDurableQueue</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">createAddress</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">deleteAddress</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">consume</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">browse</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">send</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">manage</span><span class="w"> </span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>It will authenticate and authorized LDAP users in the “Scientists” group; in addition to <code class="docutils literal notranslate"><span class="pre">amq</span></code> and <code class="docutils literal notranslate"><span class="pre">other</span></code> defined in property files.</p>
</section>
<section id="custom-jaas-login-config-file">
<h2>Custom jaas login.config file<a class="headerlink" href="#custom-jaas-login-config-file" title="Link to this heading"></a></h2>
<p>It is possible to use the following parameter to use a custom template, to be made available in playbooks file lookup paths, instead of the configuration
described above (which will in this case be ignored, unless the same parameters are used for the custom template).</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Variable</p></th>
<th class="head text-left"><p>Description</p></th>
<th class="head text-left"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">activemq_auth_template</span></code></p></td>
<td class="text-left"><p>Location of JAAS login.config template; by default use template provided with role</p></td>
<td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">login.config.j2</span></code></p></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="systemd.html" class="btn btn-neutral float-left" title="Service configuration with systemd" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="static_cluster.html" class="btn btn-neutral float-right" title="Ha configuration with active/standby nodes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Red Hat, Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>